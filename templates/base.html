<!DOCTYPE html>
<html lang="ru" {% if request.path == "/" %}class="home-page"{% elif request.path == "/services" %}class="services-page"{% elif request.path == "/contact" %}class="contact-page"{% elif request.path == "/terms" %}class="terms-page"{% elif "/service/" in request.path %}class="service-details-page"{% else %}class="inner-page"{% endif %}>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>{% block title %}EchoTech - –ò–¢ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block meta_description %}EchoTech ‚Äî –ª–∏–¥–µ—Ä –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–∞, —Å–æ–∑–¥–∞—é—â–∏–π —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ —Å 2010 –≥–æ–¥–∞. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, —Å–∏—Å—Ç–µ–º —É—á–µ—Ç–∞.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}–ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ü–û, –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, Python, C++, CRM, –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏—è, –†–æ—Å—Å–∏—è{% endblock %}">
    <meta name="author" content="EchoTech">
    <meta property="og:title" content="{% block og_title %}EchoTech - –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –∏–¥–µ–∏ –≤ —Ü–∏—Ñ—Ä–æ–≤—É—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å{% endblock %}">
    <meta property="og:description" content="{% block og_description %}EchoTech ‚Äî –ª–∏–¥–µ—Ä –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–∞, —Å–æ–∑–¥–∞—é—â–∏–π —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ —Å 2010 –≥–æ–¥–∞{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:image" content="{{ url_for('static', filename='images/echotech-logo.png', _external=True) }}">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="{{ request.url }}">
    
    <!-- Security Meta Tags -->
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöÄ</text></svg>">

    <!-- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–µ—Ä—Ü–∞–Ω–∏—è -->
    <style>
        .logo-image {
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º—ã */
        html[data-theme="light"] .light-theme-logo,
        html[data-theme="dark"] .dark-theme-logo {
            opacity: 1;
        }
    </style>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dark-theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/light-theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/logo-styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/button-fix.css') }}">

    <!-- Additional head content -->
    {% block head_content %}{% endblock %}

    <!-- Theme detection script -->
    <script nonce="{{ csp_nonce() if csp_nonce is defined }}">
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
        const getTheme = () => {
            const storedTheme = localStorage.getItem('theme') ||
                               (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            document.documentElement.setAttribute('data-theme', storedTheme);
            return storedTheme;
        };

        // –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ, –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ DOM
        getTheme();

        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            const currentTheme = getTheme();
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.checked = currentTheme === 'dark';
            }
        });
    </script>
</head>
<body {% if request.path == "/" %}class="home-page"{% elif request.path == "/services" %}class="services-page"{% elif request.path == "/contact" %}class="contact-page"{% elif request.path == "/terms" %}class="terms-page"{% elif "/service/" in request.path %}class="service-details-page"{% else %}class="inner-page"{% endif %}>
    <!-- –®–∞–ø–∫–∞ -->
    <header class="site-header">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand" href="{{ url_for('home.index') }}">
                    <img src="{{ url_for('static', filename='images/echotech-logo.png') }}" alt="EchoTech - –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è" width="150" height="50" class="logo-image light-theme-logo" loading="eager">
                    <img src="{{ url_for('static', filename='images/echotech-logo-dark.png') }}" alt="EchoTech - –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è" width="150" height="50" class="logo-image dark-theme-logo" loading="eager">
                </a>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link {% if request.endpoint == 'home.index' %}active{% endif %}" href="{{ url_for('home.index') }}" data-i18n="Home">{{ _('–ì–ª–∞–≤–Ω–∞—è') }}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.endpoint == 'services.index' %}active{% endif %}" href="{{ url_for('services.index') }}" data-i18n="Services">{{ _('–£—Å–ª—É–≥–∏') }}</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link {% if request.endpoint == 'contact.index' %}active{% endif %}" href="{{ url_for('contact.index') }}" data-i18n="Contact">{{ _('–ö–æ–Ω—Ç–∞–∫—Ç—ã') }}</a>
                        </li>
                        <li class="nav-item ms-2 d-flex align-items-center">
                            <div class="theme-switch-wrapper">
                                <label class="theme-switch" for="theme-toggle">
                                    <input type="checkbox" id="theme-toggle" />
                                    <div class="slider round">
                                        <i class="fas fa-sun"></i>
                                        <i class="fas fa-moon"></i>
                                    </div>
                                </label>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- CSRF —Ç–æ–∫–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º -->
    {% if csrf_token is defined %}
    <form id="csrf-form" style="display:none">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    </form>
    {% endif %}

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main class="site-content">
        {% block content %}{% endblock %}
    </main>

    <!-- –ú–æ–±–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ - —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã -->
    <div class="mobile-switchers">
        <div class="theme-switch-wrapper">
            <label class="theme-switch" for="mobile-theme-toggle">
                <input type="checkbox" id="mobile-theme-toggle" />
                <div class="slider round">
                    <i class="fas fa-sun"></i>
                    <i class="fas fa-moon"></i>
                </div>
            </label>
        </div>
    </div>

    <!-- –ü–æ–¥–≤–∞–ª -->
    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                    <h5 class="text-uppercase">{{ _('Echo') }}<span class="tech-blue">Tech</span></h5>
                    <p data-i18n="Your trusted partner for comprehensive IT consulting solutions. We bring your digital ideas to life with cutting-edge technology and expert innovation.">{{ _('–í–∞—à –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä—Ç–Ω–µ—Ä –≤ —Å—Ñ–µ—Ä–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã—Ö –ò–¢-–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π. –ú—ã –≤–æ–ø–ª–æ—â–∞–µ–º –≤–∞—à–∏ —Ü–∏—Ñ—Ä–æ–≤—ã–µ –∏–¥–µ–∏ –≤ –∂–∏–∑–Ω—å —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–¥–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö –∏–Ω–Ω–æ–≤–∞—Ü–∏–π.') }}</p>
                </div>

                <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
                    <h5 class="text-uppercase" data-i18n="Links">{{ _('–°—Å—ã–ª–∫–∏') }}</h5>
                    <ul class="list-unstyled mb-0">
                        <li><a href="{{ url_for('home.index') }}" class="footer-link" data-i18n="Home">{{ _('–ì–ª–∞–≤–Ω–∞—è') }}</a></li>
                        <li><a href="{{ url_for('services.index') }}" class="footer-link" data-i18n="Services">{{ _('–£—Å–ª—É–≥–∏') }}</a></li>
                        <li><a href="{{ url_for('contact.index') }}" class="footer-link" data-i18n="Contact">{{ _('–ö–æ–Ω—Ç–∞–∫—Ç—ã') }}</a></li>
                        <li><a href="{{ url_for('terms.index') }}" class="footer-link" data-i18n="Terms">{{ _('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ') }}</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                    <h5 class="text-uppercase" data-i18n="Services">{{ _('–£—Å–ª—É–≥–∏') }}</h5>
                    <ul class="list-unstyled mb-0">
                        <li><a href="{{ url_for('services.index') }}#individual-solutions" class="footer-link">{{ _('–†–µ—à–µ–Ω–∏—è –¥–ª—è —á–∞—Å—Ç–Ω—ã—Ö –ª–∏—Ü') }}</a></li>
                        <li><a href="{{ url_for('services.index') }}#business-solutions" class="footer-link">{{ _('–†–µ—à–µ–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å–∞') }}</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-6 mb-4 mb-md-0">
                    <h5 class="text-uppercase" data-i18n="Contact">{{ _('–ö–æ–Ω—Ç–∞–∫—Ç—ã') }}</h5>
                    <ul class="list-unstyled mb-0">
                        <li class="mb-2"><i class="fas fa-envelope me-2"></i> info@echotech.ru</li>
                        <li class="mb-2"><i class="fab fa-telegram me-2"></i> @AlexeyEchoDev</li>
                        <li class="mb-3 mt-3"><strong>–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:</strong></li>
                        <li class="mb-2"><i class="fas fa-clock me-2"></i> –ü–Ω-–ü—Ç: 9:00-18:00 –ú–°–ö</li>
                        <li class="mb-2"><i class="fas fa-clock me-2"></i> –°–±: 10:00-14:00 –ú–°–ö</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="text-center p-3 copyright">
            ¬© {{ get_current_year() }} {{ _('Echo') }}<span class="tech-blue">Tech</span>. <span data-i18n="All rights reserved.">{{ _('–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.') }}</span>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle —Å Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js" integrity="sha512-334uBDwY0iZ2TklV1OtDtBW9vp7jjP7SWRzT7Ehu1fdtPIjTpCwTSFb8HI/YBau9L1/kRBEOALrS229Kry4yFQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js" integrity="sha512-oKI0pS1ut+mxQZdqnD3w9fqArLyILRsT3Dx0B+8RVEXzEk3aNK3J3pWlaGJ8MtTs1oiwyXDAH6hG6jy1sY0YqA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ JS -->
    <script src="{{ url_for('static', filename='js/main.js') }}" nonce="{{ csp_nonce() if csp_nonce is defined }}"></script>
    <script src="{{ url_for('static', filename='js/animations.js') }}" nonce="{{ csp_nonce() if csp_nonce is defined }}"></script>
    <script src="{{ url_for('static', filename='js/visualizations.js') }}" nonce="{{ csp_nonce() if csp_nonce is defined }}"></script>
    <script src="{{ url_for('static', filename='js/theme-switcher.js') }}" nonce="{{ csp_nonce() if csp_nonce is defined }}"></script>
    <!-- –£–¥–∞–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç —è–∑—ã–∫–æ–≤–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è -->

    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
    {% block extra_scripts %}{% endblock %}
    
    <!-- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è SEO -->
    {% from 'structured_data.html' import organization, website %}
    {{ organization() }}
    {{ website() }}
    {% block structured_data %}{% endblock %}
    
    <!-- –ó–∞—â–∏—Ç–∞ –æ—Ç CSRF –¥–ª—è AJAX-–∑–∞–ø—Ä–æ—Å–æ–≤ -->
    <script nonce="{{ csp_nonce() if csp_nonce is defined }}">
        // –î–æ–±–∞–≤–ª—è–µ–º CSRF-—Ç–æ–∫–µ–Ω –∫–æ –≤—Å–µ–º AJAX-–∑–∞–ø—Ä–æ—Å–∞–º
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof fetch !== 'undefined') {
                const originalFetch = window.fetch;
                window.fetch = function(url, options) {
                    options = options || {};
                    options.headers = options.headers || {};
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º CSRF-—Ç–æ–∫–µ–Ω –¥–ª—è POST, PUT, DELETE –∏ PATCH –∑–∞–ø—Ä–æ—Å–æ–≤
                    if (options.method && ['POST', 'PUT', 'DELETE', 'PATCH'].indexOf(options.method.toUpperCase()) !== -1) {
                        const csrfToken = document.querySelector('input[name="csrf_token"]');
                        if (csrfToken) {
                            options.headers['X-CSRFToken'] = csrfToken.value;
                        }
                    }
                    
                    return originalFetch(url, options);
                };
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Å–µ—Ö —Ñ–æ—Ä–º –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    // –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
                    const requiredFields = form.querySelectorAll('[required]');
                    let isValid = true;
                    
                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            isValid = false;
                            field.classList.add('is-invalid');
                        } else {
                            field.classList.remove('is-invalid');
                        }
                    });
                    
                    if (!isValid) {
                        e.preventDefault();
                        return false;
                    }
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–æ—Ç–∞–º–∏
                    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è "–ª–æ–≤—É—à–∫–∏" –±–æ—Ç–æ–≤
                });
            });
        });
    </script>
</body>
</html>